!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.resourceScheduler=e()}}(function(){return function e(t,r,o){function i(s,u){if(!r[s]){if(!t[s]){var d="function"==typeof require&&require;if(!u&&d)return d(s,!0);if(n)return n(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return i(r?r:e)},l,l.exports,e,t,r,o)}return r[s].exports}for(var n="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,r){"use strict";var o=function(){function e(e,t){this._resourceCreator=e,this._jobsLimit=t,this._freeResourcesCount=this._jobsLimit,this._freeResources=new Array(this._jobsLimit),this._pendingJobs=[]}function t(e,t){this._scheduler=e,this._resource=t}return e.prototype.enqueueJob=function(e,t){if(this._freeResourcesCount>0){--this._freeResourcesCount;var r=this._freeResources.pop();void 0===r&&(r=this._resourceCreator()),this._schedule(e,r,t)}else this._pendingJobs.push({jobFunc:e,jobContext:t})},e.prototype.shouldAbort=function(e){return!1},e.prototype._schedule=function(e,r,o){var i=new t(this,r);e(r,o,i)},t.prototype.jobDone=function(){if(this._scheduler._pendingJobs.length>0){var e=this._scheduler._pendingJobs.pop();this._scheduler._schedule(e.jobFunc,this._resource,e.jobContext)}else this._scheduler._freeResources.push(this._resource),++this._scheduler._freeResourcesCount},t.prototype.shouldYieldOrAbort=function(){return!1},t.prototype.tryYield=function(){return!1},e}();t.exports=o},{}],2:[function(e,t,r){"use strict";var o=function(){function e(){this.clear()}return e.prototype.clear=function(){this._first={_prev:null,_parent:this},this._last={_next:null,_parent:this},this._count=0,this._last._prev=this._first,this._first._next=this._last},e.prototype.add=function(e,t){null!==t&&void 0!==t||(t=this._last),this._validateIteratorOfThis(t),++this._count;var r={_value:e,_next:t,_prev:t._prev,_parent:this};return r._prev._next=r,t._prev=r,r},e.prototype.remove=function(e){this._validateIteratorOfThis(e),--this._count,e._prev._next=e._next,e._next._prev=e._prev,e._parent=null},e.prototype.getFromIterator=function(e){return this._validateIteratorOfThis(e),e._value},e.prototype.getFirstIterator=function(){var e=this.getNextIterator(this._first);return e},e.prototype.getLastIterator=function(){var e=this.getPrevIterator(this._last);return e},e.prototype.getNextIterator=function(e){return this._validateIteratorOfThis(e),e._next===this._last?null:e._next},e.prototype.getPrevIterator=function(e){return this._validateIteratorOfThis(e),e._prev===this._first?null:e._prev},e.prototype.getCount=function(){return this._count},e.prototype._validateIteratorOfThis=function(e){if(e._parent!==this)throw"iterator must be of the current LinkedList"},e}();t.exports=o},{}],3:[function(e,t,r){"use strict";var o=e("linked-list"),i=function(){function e(e,t,r,i){i=i||{},this._resourceCreator=e,this._jobsLimit=t,this._prioritizer=r,this._showLog=i.showLog,this._schedulerName=i.schedulerName,this._numNewJobs=i.numNewJobs||20,this._numJobsBeforeRerankOldPriorities=i.numJobsBeforeRerankOldPriorities||20,this._freeResourcesCount=this._jobsLimit,this._freeResources=new Array(this._jobsLimit),this._resourcesGuaranteedForHighPriority=i.resourcesGuaranteedForHighPriority||0,this._highPriorityToGuaranteeResource=i.highPriorityToGuaranteeResource||0,this._logCallIndentPrefix=">",this._pendingJobsCount=0,this._oldPendingJobsByPriority=[],this._newPendingJobsLinkedList=new o,this._schedulesCounter=0}function t(e,t,r){if(e._showLog){var o=e._prioritizer.getPriority(r);y(e,"jobDone() start: job done of priority "+o,1)}_(e,t),g(e),y(e,"jobDone() end",-1)}function r(e,t){y(e,"shouldYieldOrAbort() start",1);var r=e._prioritizer.getPriority(t),o=r<0||n(e,r);return y(e,"shouldYieldOrAbort() end",-1),o}function i(e,t,r,o,i,n){y(e,"tryYield() start",1);var u=e._prioritizer.getPriority(r);if(u<0)return o(r),_(e,n),y(e,"tryYield() end: job aborted",-1),!0;var h=s(e,u);if(g(e),null===h)return y(e,"tryYield() end: job continues",-1),!1;i(r);var l={jobFunc:t,jobAbortedFunc:o,jobContext:r};return d(e,l,u),g(e),a(e,h,n),g(e),y(e,"tryYield() end: job yielded",-1),!0}function n(e,t){var r=e._newPendingJobsLinkedList.getFirstIterator();for(y(e,"hasNewJobWithHigherPriority() start",1);null!==r;){var o=e._newPendingJobsLinkedList.getNextIterator(r),i=e._newPendingJobsLinkedList.getFromIterator(r),n=e._prioritizer.getPriority(i.jobContext);if(n<0)f(e,r),--e._pendingJobsCount,i.jobAbortedFunc(i.jobContext),r=o;else{if(n>t)return y(e,"hasNewJobWithHigherPriority() end: returns true",-1),!0;r=o}}return y(e,"hasNewJobWithHigherPriority() end: returns false",-1),!1}function s(e,t){y(e,"tryDequeueNewJobWithHigherPriority() start",1);for(var r=null,o=t,i=[],n=e._newPendingJobsLinkedList.getFirstIterator();null!==n;){var s=e._newPendingJobsLinkedList.getNextIterator(n),u=e._newPendingJobsLinkedList.getFromIterator(n),d=e._prioritizer.getPriority(u.jobContext);d<0?(f(e,n),--e._pendingJobsCount,u.jobAbortedFunc(u.jobContext),n=s):((void 0===o||d>o)&&(o=d,r=n),e._showLog?(void 0===i[d]?i[d]=1:++i[d],n=s):n=s)}var h=null;if(null!==r&&(h=f(e,r),--e._pendingJobsCount),e._showLog){for(var l="tryDequeueNewJobWithHigherPriority(): Jobs list:",_=0;_<i.length;++_)void 0!==i[_]&&(l+=i[_]+" jobs of priority "+_+";");y(e,l),null!==h&&y(e,"tryDequeueNewJobWithHigherPriority(): dequeued new job of priority "+o)}return g(e),y(e,"tryDequeueNewJobWithHigherPriority() end",-1),h}function u(e){if(y(e,"tryGetFreeResource() start",1),0===e._freeResourcesCount)return null;--e._freeResourcesCount;var t=e._freeResources.pop();return void 0===t&&(t=e._resourceCreator()),g(e),y(e,"tryGetFreeResource() end",-1),t}function d(e,t,r){y(e,"enqueueNewJob() start",1),++e._pendingJobsCount;var o=e._newPendingJobsLinkedList.getFirstIterator();if(c(e,t,o),e._showLog&&y(e,"enqueueNewJob(): enqueued job of priority "+r),e._newPendingJobsLinkedList.getCount()<=e._numNewJobs)return g(e),void y(e,"enqueueNewJob() end: _newPendingJobsLinkedList is small enough",-1);var i=e._newPendingJobsLinkedList.getLastIterator(),n=f(e,i);h(e,n),g(e),y(e,"enqueueNewJob() end: One job moved from new job list to old job list",-1)}function h(e,t){y(e,"enqueueOldJob() start",1);var r=e._prioritizer.getPriority(t.jobContext);return r<0?(--e._pendingJobsCount,t.jobAbortedFunc(t.jobContext),void y(e,"enqueueOldJob() end: job aborted",-1)):(void 0===e._oldPendingJobsByPriority[r]&&(e._oldPendingJobsByPriority[r]=[]),e._oldPendingJobsByPriority[r].push(t),void y(e,"enqueueOldJob() end: job enqueued to old job list",-1))}function l(e){y(e,"rerankPriorities() start",1);var t=e._oldPendingJobsByPriority,r=e._newPendingJobsLinkedList;if(0===t.length)return void y(e,"rerankPriorities() end: no need to rerank",-1);e._oldPendingJobsByPriority=[],e._newPendingJobsLinkedList=new o;for(var i=0;i<t.length;++i)if(void 0!==t[i])for(var n=0;n<t[i].length;++n)h(e,t[i][n]);for(var s=r.getFirstIterator();null!==s;){var u=r.getFromIterator(s);h(e,u),s=r.getNextIterator(s)}for(var d="rerankPriorities(): ",l=e._oldPendingJobsByPriority.length-1;l>=0;--l){var _=e._oldPendingJobsByPriority[l];if(void 0!==_){for(e._showLog&&(d+=_.length+" jobs in priority "+l+";");_.length>0&&e._newPendingJobsLinkedList.getCount()<e._numNewJobs;){var a=_.pop();c(e,a)}if(e._newPendingJobsLinkedList.getCount()>=e._numNewJobs&&!e._showLog)break}}e._showLog&&y(e,d),g(e),y(e,"rerankPriorities() end: rerank done",-1)}function _(e,t){y(e,"resourceFreed() start",1),++e._freeResourcesCount;var r=p(e);--e._freeResourcesCount;var o=s(e,r-1);if(null!==o)return g(e),a(e,o,t),g(e),void y(e,"resourceFreed() end: new job scheduled",-1);var i=e._pendingJobsCount>e._newPendingJobsLinkedList.getCount();if(!i)return e._freeResources.push(t),++e._freeResourcesCount,g(e),void y(e,"resourceFreed() end: no job to schedule",-1);for(var n,u=e._oldPendingJobsByPriority.length,d=u-1;d>=0;--d){var h=e._oldPendingJobsByPriority[d];if(void 0!==h&&0!==h.length){for(var l=h.length-1;l>=0;--l){if(o=h[l],n=e._prioritizer.getPriority(o.jobContext),n>=d){h.length=l;break}n<0?(--e._pendingJobsCount,o.jobAbortedFunc(o.jobContext)):(void 0===e._oldPendingJobsByPriority[n]&&(e._oldPendingJobsByPriority[n]=[]),e._oldPendingJobsByPriority[n].push(o)),o=null}if(null!==o)break;h.length=0}}return null===o?(e._freeResources.push(t),++e._freeResourcesCount,g(e),void y(e,"resourceFreed() end: no non-aborted job to schedule",-1)):(e._showLog&&y(e,"resourceFreed(): dequeued old job of priority "+n),--e._pendingJobsCount,g(e),a(e,o,t),g(e),void y(e,"resourceFreed() end: job scheduled",-1))}function a(e,t,r){if(y(e,"schedule() start",1),++e._schedulesCounter,e._schedulesCounter>=e._numJobsBeforeRerankOldPriorities&&(e._schedulesCounter=0,l(e)),e._showLog){var o=e._prioritizer.getPriority(t.jobContext);y(e,"schedule(): scheduled job of priority "+o)}var i=new v(e,r,t.jobContext);t.jobFunc(r,t.jobContext,i),y(e,"schedule() end",-1)}function c(e,t,r){y(e,"addJobToLinkedList() start",1),e._newPendingJobsLinkedList.add(t,r),b(e),y(e,"addJobToLinkedList() end",-1)}function f(e,t){y(e,"extractJobFromLinkedList() start",1);var r=e._newPendingJobsLinkedList.getFromIterator(t);return e._newPendingJobsLinkedList.remove(t),b(e),y(e,"extractJobFromLinkedList() end",-1),r}function b(e){if(e._showLog){y(e,"ensureNumberOfNodes() start",1);for(var t=e._newPendingJobsLinkedList.getFirstIterator(),r=0;null!==t;)++r,t=e._newPendingJobsLinkedList.getNextIterator(t);if(r!==e._newPendingJobsLinkedList.getCount())throw"Unexpected count of new jobs";y(e,"ensureNumberOfNodes() end",-1)}}function g(e){if(e._showLog){y(e,"ensurePendingJobsCount() start",1);for(var t=0,r=0;r<e._oldPendingJobsByPriority.length;++r){var o=e._oldPendingJobsByPriority[r];void 0!==o&&(t+=o.length)}var i=t+e._newPendingJobsLinkedList.getCount();if(i!==e._pendingJobsCount)throw"Unexpected count of jobs";y(e,"ensurePendingJobsCount() end",-1)}}function p(e){return y(e,"getMinimalPriorityToSchedule() start",1),e._freeResourcesCount<=e._resourcesGuaranteedForHighPriority?(y(e,"getMinimalPriorityToSchedule() end: guarantee resource for high priority is needed",-1),e._highPriorityToGuaranteeResources):(y(e,"getMinimalPriorityToSchedule() end: enough resources, no need to guarantee resource for high priority",-1),0)}function y(e,t,r){e._showLog&&(r===-1&&(e._logCallIndentPrefix=e._logCallIndentPrefix.substr(1)),void 0!==e._schedulerName?console.log(e._logCallIndentPrefix+"PriorityScheduler "+e._schedulerName+": "+t):console.log(e._logCallIndentPrefix+"PriorityScheduler: "+t),1===r&&(e._logCallIndentPrefix+=">"))}function v(e,t,r){this._isValid=!0,this._scheduler=e,this._resource=t,this._context=r}return e.prototype.enqueueJob=function(e,t,r){y(this,"enqueueJob() start",1);var o=this._prioritizer.getPriority(t);if(o<0)return r(t),void y(this,"enqueueJob() end: job aborted",-1);var i={jobFunc:e,jobAbortedFunc:r,jobContext:t},n=p(this),s=null;return o>=n&&(s=u(this)),null!==s?(a(this,i,s),void y(this,"enqueueJob() end: job scheduled",-1)):(d(this,i,o),g(this),void y(this,"enqueueJob() end: job pending",-1))},e.prototype.shouldAbort=function(e){y(this,"enqueueJob() start",1);var t=this._prioritizer.getPriority(e);return y(this,"enqueueJob() end",-1),t<0},v.prototype._checkValidity=function(){if(!this._isValid)throw"ResourceScheduler error: Already terminated job"},v.prototype._clearValidity=function(){this._isValid=!1,this._resource=null,this._context=null,this._scheduler=null},v.prototype.jobDone=function(){this._checkValidity(),t(this._scheduler,this._resource,this._context),this._clearValidity()},v.prototype.shouldYieldOrAbort=function(){return this._checkValidity(),r(this._scheduler,this._context)},v.prototype.tryYield=function(e,t,r){this._checkValidity();var o=i(this._scheduler,e,this._context,t,r,this._resource);return o&&this._clearValidity(),o},e}();t.exports=i},{"linked-list":2}],4:[function(e,t,r){"use strict";t.exports.PriorityScheduler=e("priority-scheduler"),t.exports.LifoScheduler=e("lifo-scheduler")},{"lifo-scheduler":1,"priority-scheduler":3}]},{},[4])(4)});
!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.asyncProxy=r()}}(function(){return function r(e,t,a){function o(s,i){if(!t[s]){if(!e[s]){var l="function"==typeof require&&require;if(!i&&l)return l(s,!0);if(n)return n(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[s]={exports:{}};e[s][0].call(u.exports,function(r){var t=e[s][1][r];return o(t?t:r)},u,u.exports,r,e,t,a)}return t[s].exports}for(var n="function"==typeof require&&require,s=0;s<a.length;s++)o(a[s]);return o}({1:[function(r,e,t){"use strict";e.exports.SubWorkerEmulationForChrome=r("sub-worker-emulation-for-chrome"),e.exports.AsyncProxyFactory=r("async-proxy-factory"),e.exports.AsyncProxySlave=r("async-proxy-slave"),e.exports.AsyncProxyMaster=r("async-proxy-master"),e.exports.ScriptsToImportPool=r("scripts-to-Import-Pool")},{"async-proxy-factory":2,"async-proxy-master":3,"async-proxy-slave":4,"scripts-to-Import-Pool":5,"sub-worker-emulation-for-chrome":7}],2:[function(r,e,t){"use strict";var a=r("async-proxy-master"),o=function(){function r(r,t,a){a[0]||{};r.prototype[t]=function(){for(var r=e.getWorkerHelper(this),o=[],n=0;n<arguments.length;++n){var s=a[n+1],i=arguments[n];if("callback"===s)o[n]=r.wrapCallback(i);else{if(s)throw"AsyncProxyFactory error: Unrecognized argument description "+s+" in argument "+(n+1)+" of method "+t;o[n]=i}}return r.callFunction(t,o,a[0])}}var e={};return e.create=function(r,t,a,o){if(!r||!r.length)throw"AsyncProxyFactory error: missing scriptsToImport (2nd argument)";var n=o||function(){var a=e.convertArgs(arguments);e.initialize(this,r,t,a)};return a&&e.addMethods(n,a),n},e.addMethods=function(e,t){for(var a in t)r(e,a,t[a]||[]);return e},e.initialize=function(r,e,t,a){if(r.__workerHelperInitArgs)throw"asyncProxy error: Double initialization of AsyncProxy master";r.__workerHelperInitArgs={scriptsToImport:e,ctorName:t,ctorArgs:a}},e.convertArgs=function(r){for(var e=new Array(r.length),t=0;t<r.length;++t)e[t]=r[t];return e},e.getWorkerHelper=function(r){if(!r.__workerHelper){if(!r.__workerHelperInitArgs)throw"asyncProxy error: asyncProxyFactory.initialize() not called yet";r.__workerHelper=new a(r.__workerHelperInitArgs.scriptsToImport,r.__workerHelperInitArgs.ctorName,r.__workerHelperInitArgs.ctorArgs||[])}return r.__workerHelper},e}();e.exports=o},{"async-proxy-master":3}],3:[function(r,e,t){"use strict";var a=r("scripts-to-import-pool"),o=function(){function r(a,n,s,i){function l(r){o(u,r)}var u=this;i=i||{},u._callbacks=[],u._pendingPromiseCalls=[],u._subWorkerById=[],u._subWorkers=[],u._userDataHandler=null,u._notReturnedFunctions=0,u._functionsBufferSize=i.functionsBufferSize||5,u._pendingMessages=[];var p=e(),f=t.toString();f=f.replace("SCRIPT_PLACEHOLDER",p);var d=new Blob(["(",f,")()"],{type:"application/javascript"}),y=URL.createObjectURL(d);u._worker=new Worker(y),u._worker.onmessage=l,u._worker.postMessage({functionToCall:"ctor",scriptsToImport:a,ctorName:n,args:s,callId:++c,isPromise:!1,masterEntryUrl:r.getEntryUrl()})}function e(){var r=new Error;return a._getScriptName(r)}function t(){importScripts("SCRIPT_PLACEHOLDER"),asyncProxy.AsyncProxySlave._initializeSlave()}function o(r,e){var t=e.data.callId;switch(e.data.type){case"functionCalled":--r._notReturnedFunctions,i(r);break;case"promiseResult":var a=r._pendingPromiseCalls[t];delete r._pendingPromiseCalls[t];var o=e.data.result;a.resolve(o);break;case"promiseFailure":var s=r._pendingPromiseCalls[t];delete r._pendingPromiseCalls[t];var l=e.data.reason;s.reject(l);break;case"userData":null!==r._userDataHandler&&r._userDataHandler(e.data.userData);break;case"callback":var c=r._callbacks[e.data.callId];if(void 0===c)throw"Unexpected message from SlaveWorker of callback ID: "+e.data.callId+". Maybe should indicate isMultipleTimesCallback = true on creation?";c.isMultipleTimeCallback||r.freeCallback(r._callbacks[e.data.callId]),null!==c.callback&&c.callback.apply(null,e.data.args);break;case"subWorkerCtor":var u=new Worker(e.data.scriptUrl),p=e.data.subWorkerId;r._subWorkerById[p]=u,r._subWorkers.push(u),u.onmessage=function(e){n(r,e.ports,!1,{functionToCall:"subWorkerOnMessage",subWorkerId:p,data:e.data})};break;case"subWorkerPostMessage":var f=r._subWorkerById[e.data.subWorkerId];f.postMessage(e.data.data);break;case"subWorkerTerminate":var d=r._subWorkerById[e.data.subWorkerId];d.terminate();break;default:throw"Unknown message from AsyncProxySlave of type: "+e.data.type}}function n(r,e,t,a){return r._notReturnedFunctions>=r._functionsBufferSize?void r._pendingMessages.push({transferables:e,isFunctionCall:t,message:a}):void s(r,e,t,a)}function s(r,e,t,a){t&&++r._notReturnedFunctions,r._worker.postMessage(a,e)}function i(r){for(;r._notReturnedFunctions<r._functionsBufferSize&&r._pendingMessages.length>0;){var e=r._pendingMessages.shift();s(r,e.transferables,e.isFunctionCall,e.message)}}function l(){var r=location.href,e=r.lastIndexOf("/");return e>=0&&(r=r.substring(0,e)),r}var c=0,u=!1,p=l();return r.prototype.setUserDataHandler=function(r){this._userDataHandler=r},r.prototype.terminate=function(){this._worker.terminate();for(var r=0;r<this._subWorkers.length;++r)this._subWorkers[r].terminate()},r.prototype.callFunction=function(e,t,a){a=a||{};var o=!!a.isReturnPromise,i=a.transferables||[],l=a.pathsToTransferablesInPromiseResult,u=++c,p=null,f=this;o&&(p=new Promise(function(r,e){f._pendingPromiseCalls[u]={resolve:r,reject:e}}));var d,y=a.isSendImmediately?s:n;if(d="function"==typeof i?i():r._extractTransferables(i,t),y(this,d,!0,{functionToCall:e,args:t||[],callId:u,isPromise:o,pathsToTransferablesInPromiseResult:l}),o)return p},r.prototype.wrapCallback=function(r,e,t){t=t||{};var a=++c,o={isWorkerHelperCallback:!0,isMultipleTimeCallback:!!t.isMultipleTimeCallback,callId:a,callbackName:e,pathsToTransferables:t.pathsToTransferables},n={isMultipleTimeCallback:!!t.isMultipleTimeCallback,callId:a,callback:r,pathsToTransferables:t.pathsToTransferables};return this._callbacks[a]=n,o},r.prototype.freeCallback=function(r){delete this._callbacks[r.callId]},r.getEntryUrl=function(){return u=!0,p},r._setEntryUrl=function(r){if(p!==r&&u)throw"Previous values returned from getMasterEntryUrl is wrong. Avoid calling it within the slave c`tor";p=r},r._extractTransferables=function(r,e){if(void 0!==r){for(var t=new Array(r.length),a=0;a<r.length;++a){for(var o=r[a],n=e,s=0;s<o.length;++s){var i=o[s];n=n[i]}t[a]=n}return t}},r}();e.exports=o},{"scripts-to-import-pool":6}],4:[function(r,e,t){"use strict";var a=r("async-proxy-master"),o=r("sub-worker-emulation-for-chrome"),n=function(){function r(r){var e=r.data.functionToCall,t=r.data.args,o=r.data.callId,l=r.data.isPromise,p=r.data.pathsToTransferablesInPromiseResult,f=null;switch(e){case"ctor":a._setEntryUrl(r.data.masterEntryUrl);var d=r.data.scriptsToImport;s=r.data.ctorName;for(var y=0;y<d.length;++y)importScripts(d[y]);return void(n=c.apply(null,t));case"subWorkerOnMessage":var m=u[r.data.subWorkerId],k={data:r.data.data};return void m.onmessage(k)}t=new Array(r.data.args.length);for(var b=0;b<r.data.args.length;++b){var v=r.data.args[b];void 0!==v&&null!==v&&v.isWorkerHelperCallback&&(v=i.wrapCallbackFromSlaveSide(v)),t[b]=v}for(var g,_=n;_&&!(g=n[e]);)_=_.__proto__;if(!g)throw"AsyncProxy error: could not find function "+e;var h=g.apply(n,t);l&&i.wrapPromiseFromSlaveSide(o,h,p),self.postMessage({type:"functionCalled",callId:r.data.callId,result:f})}function e(){var r;try{for(var e=s.split("."),a=self,o=0;o<e.length;++o)a=a[e[o]];var n=a,i=[null].concat(t(arguments));r=new(Function.prototype.bind.apply(n,i))}catch(l){throw new Error("Failed locating class name "+s+": "+l)}return r}function t(r){for(var e=new Array(r.length),t=0;t<r.length;++t)e[t]=r[t];return e}var n,s,i={},l=null,c=e,u={};return i._initializeSlave=function(){self.onmessage=r},i.setSlaveSideCreator=function(r){c=r},i.setBeforeOperationListener=function(r){l=r},i.sendUserDataToMaster=function(r){self.postMessage({type:"userData",userData:r})},i.wrapPromiseFromSlaveSide=function(r,e,t){var o=e.then(function(e){var o=a._extractTransferables(t,e);self.postMessage({type:"promiseResult",callId:r,result:e},o)});o["catch"](function(e){self.postMessage({type:"promiseFailure",callId:r,reason:e})})},i.wrapCallbackFromSlaveSide=function(r){function e(){if(o)throw"Callback is called twice but isMultipleTimeCallback = false";var e=t(arguments);if(null!==l)try{l.call(n,"callback",r.callbackName,e)}catch(s){console.log("AsyncProxySlave.beforeOperationListener has thrown an exception: "+s)}var i=a._extractTransferables(r.pathsToTransferables,e);self.postMessage({type:"callback",callId:r.callId,args:e},i),r.isMultipleTimeCallback||(o=!0)}var o=!1;return e},void 0===self.Worker&&(o.initialize(u),self.Worker=o),i}();e.exports=n},{"async-proxy-master":3,"sub-worker-emulation-for-chrome":7}],5:[function(r,e,t){"use strict";var a=function(){function r(){var r=this;r._scriptsByName={},r._scriptsArray=null}var e=/at (|[^ ]+ \()([^ ]+):\d+:\d+/,t=new RegExp(/.+@(.*?):\d+:\d+/),a=new RegExp(/.+\/(.*?):\d+(:\d+)*$/);return r.prototype.addScriptFromErrorWithStackTrace=function(e){var t=r._getScriptName(e);this._scriptsByName[t]||(this._scriptsByName[t]=!0,this._scriptsArray=null)},r.prototype.getScriptsForWorkerImport=function(){if(null===this._scriptsArray){this._scriptsArray=[];for(var r in this._scriptsByName)this._scriptsArray.push(r)}return this._scriptsArray},r._getScriptName=function(r){var o=r.stack.trim(),n=e.exec(o);if(n&&""!==n[2])return n[2];if(n=t.exec(o),n&&""!==n[1])return n[1];if(n=a.exec(o),n&&""!==n[1])return n[1];if(void 0!==r.fileName)return r.fileName;throw"async-proxy.js: Could not get current script URL"},r}();e.exports=a},{}],6:[function(r,e,t){arguments[4][5][0].apply(t,arguments)},{dup:5}],7:[function(r,e,t){"use strict";var a=function(){function r(r){if(null===t)throw"AsyncProxy internal error: SubWorkerEmulationForChrome not initialized";var a=this;a._subWorkerId=++e,t[a._subWorkerId]=a,self.postMessage({type:"subWorkerCtor",subWorkerId:a._subWorkerId,scriptUrl:r})}var e=0,t=null;return r.initialize=function(r){t=r},r.prototype.postMessage=function(r,e){self.postMessage({type:"subWorkerPostMessage",subWorkerId:this._subWorkerId,data:r},e)},r.prototype.terminate=function(r,e){self.postMessage({type:"subWorkerTerminate",subWorkerId:this._subWorkerId},e)},r}();e.exports=a},{}]},{},[1])(1)});
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.dependencyWorkers=e()}}(function(){return function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){var d="function"==typeof require&&require;if(!a&&d)return d(o,!0);if(s)return s(o,!0);var p=new Error("Cannot find module '"+o+"'");throw p.code="MODULE_NOT_FOUND",p}var l=r[o]={exports:{}};t[o][0].call(l.exports,function(e){var r=t[o][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){"use strict";t.exports.DependencyWorkers=e("dependency-workers"),t.exports.DependencyWorkersTaskContext=e("dependency-workers-task-context"),t.exports.DependencyWorkersTask=e("dependency-workers-task"),t.exports.WrapperInputRetreiverBase=e("wrapper-input-retreiver-base"),t.exports.SchedulerDependencyWorkers=e("scheduler-dependency-workers"),t.exports.DependencyWorkersTaskScheduler=e("dependency-workers-task-scheduler")},{"dependency-workers":6,"dependency-workers-task":5,"dependency-workers-task-context":2,"dependency-workers-task-scheduler":4,"scheduler-dependency-workers":10,"wrapper-input-retreiver-base":11}],2:[function(e,t,r){"use strict";var n=function(){function e(e,t){this._taskInternals=e,this._callbacks=t,this._taskContextsIterator=e.taskContexts.add(this),this._priorityCalculatorIterator=null}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._taskInternals.isActualTerminationPending||!this._taskInternals.isTerminated}}),Object.defineProperty(e.prototype,"isTerminated",{get:function(){return this._taskInternals.isTerminated}}),e.prototype.getProcessedData=function(){return this._taskInternals.processedData},e.prototype.setPriorityCalculator=function(e){null!==this._priorityCalculatorIterator&&(this._taskInternals.priorityCalculators.remove(this._priorityCalculatorIterator),this._priorityCalculatorIterator=null),e&&(this._priorityCalculatorIterator=this._taskInternals.priorityCalculators.add(e))},e.prototype.unregister=function(){if(!this._taskContextsIterator)throw"dependencyWorkers: Already unregistered";this.setPriorityCalculator(null),this._taskInternals.taskContexts.remove(this._taskContextsIterator),this._taskContextsIterator=null,this._taskInternals.isTerminated||(0===this._taskInternals.taskContexts.getCount()?this._taskInternals.abort(!1):this._taskInternals.statusUpdate())},e}();t.exports=n},{}],3:[function(e,t,r){"use strict";var n=e("linked-list"),i=e("js-builtin-hash-map"),s=e("dependency-workers-task"),o=function(){function e(){this.isTerminated=!1,this.isActualTerminationPending=!1,this.processedData=[],this.taskApi=null,this.pendingDataForWorker=[],this.canSkipLastPendingDataForWorker=!1,this.taskContexts=new n,this.priorityCalculators=new n,this.taskKey=null,this._dependsTasksTerminatedCount=0,this._parentDependencyWorkers=null,this._workerInputRetreiver=null,this._parentList=null,this._parentIterator=null,this._dependsTaskContexts=null,this._priorityCalculator=null,this._isRegisteredDependPriorityCalculator=!1,this._isDetached=!1,this._canSkipLastProcessedData=!1,this._jobCallbacks=null,this._isAborted=!1,this._isAbortedNotByScheduler=!1,this._isUserCalledTerminate=!1,this._isWaitingForWorkerResult=!1,this._dependTaskKeys=[],this._dependTaskResults=[],this._hasDependTaskData=[],this._pendingDelayedAction=!1,this._pendingDelayedDependencyData=[],this._pendingDelayedEnded=!1,this._pendingDelayedNewData=[],this._pendingDelayedCanSkipLastNewData=!1,this._pendingWorkerDone=!1;var e=this;this._scheduleNotifier={calculatePriority:function(){return e.calculatePriority()},schedule:function(t){if(null!==e._jobCallbacks)throw"dependencyWorkers: scheduleNotifier.schedule was called twice";if(!t||!t.jobDone)throw"dependencyWorkers: Passed invalid jobCallbacks argument to scheduleNotifier.schedule(). Ensure jobCallbacks has jobDone method";if(e._isAbortedNotByScheduler)return void t.jobDone();if(this.isTerminated&&!this.isActualTerminationPending)throw"dependencyWorkers: scheduled after termination";var r=e.pendingDataForWorker.shift(),n=!1;0===e.pendingDataForWorker.length&&(n=e.canSkipLastPendingDataForWorker,e.canSkipLastPendingDataForWorker=!1),e._jobCallbacks=t,e._parentDependencyWorkers._dataReady(e,r.data,r.workerType,n)},abort:function(t){e.abort(t)}}}return e.prototype.initialize=function(e,t,r,n,o){this.taskKey=e,this._parentDependencyWorkers=t,this._workerInputRetreiver=r,this._parentList=n,this._parentIterator=o,this._dependsTaskContexts=new i,this.taskApi=new s(this,e),this._registerDependPriorityCalculator(),t.initializingTask(this.taskApi,this._scheduleNotifier)},e.prototype.ended=function(){this._pendingDelayedEnded=!0,this._schedulePendingDelayedActions()},e.prototype.statusUpdate=function(){var e={hasListeners:this.taskContexts.getCount()>0,isWaitingForWorkerResult:this._isWaitingForWorkerResult,terminatedDependsTasks:this._dependsTasksTerminatedCount,dependsTasks:this._dependsTaskContexts.getCount()};this.taskApi._onEvent("statusUpdated",e),this.isActualTerminationPending&&!this._isWaitingForWorkerResult&&(this.isActualTerminationPending=!1,this.ended())},e.prototype.calculatePriority=function(){for(var e=this.priorityCalculators.getFirstIterator(),t=!0,r=0;null!==e;){var n=this.priorityCalculators.getFromIterator(e),i=n();(t||i>r)&&(r=i,t=!1),e=this.priorityCalculators.getNextIterator(e)}return r},e.prototype.newData=function(e,t){this._pendingDelayedCanSkipLastNewData?this._pendingDelayedNewData[this._pendingDelayedNewData.length-1]=e:this._pendingDelayedNewData.push(e),this._pendingDelayedCanSkipLastNewData=!!t,this._schedulePendingDelayedActions()},e.prototype.workerDone=function(){if(null===this._jobCallbacks)throw"dependencyWorkers: Job done without previously started";var e=this._jobCallbacks;this._jobCallbacks=null,0===this.pendingDataForWorker.length&&(this._pendingWorkerDone=!0,this._schedulePendingDelayedActions()),e.jobDone(),this.pendingDataForWorker.length>0&&this.waitForSchedule()},e.prototype.dataReady=function(e,t,r){if(this.isTerminated){if(this._isUserCalledTerminate)throw"dependencyWorkers: already terminated"}else{var n={data:e,workerType:t};this.canSkipLastPendingDataForWorker?this.pendingDataForWorker[this.pendingDataForWorker.length-1]=n:this.pendingDataForWorker.push(n),this.canSkipLastPendingDataForWorker=!!r,this._isWaitingForWorkerResult&&!this._pendingWorkerDone||(this._isWaitingForWorkerResult=!0,this._pendingWorkerDone=!1,this.waitForSchedule(),this.statusUpdate())}},e.prototype.waitForSchedule=function(){var e=this.pendingDataForWorker[0].workerType;this._parentDependencyWorkers.waitForSchedule(this._scheduleNotifier,e)},e.prototype.detachBeforeTermination=function(){if(!this._isDetached){this._isDetached=!0,this._parentList.remove(this._parentIterator),this._parentIterator=null;for(var e=this._dependsTaskContexts.getFirstIterator();null!==e;){var t=this._dependsTaskContexts.getFromIterator(e).taskContext;e=this._dependsTaskContexts.getNextIterator(e),t.unregister()}this._dependsTaskContexts.clear(),this._unregisterDependPriorityCalculator()}},e.prototype.customEvent=function(e,t){if(this.isTerminated&&!this.isActualTerminationPending)throw"dependencyWorkers: already terminated";this._iterateCallbacks(function(r){r.onCustom&&r.onCustom(e,t)}),this.taskApi._onEvent("custom",e,t)},e.prototype.terminate=function(){if(this._isUserCalledTerminate)throw"dependencyWorkers: already terminated";this._isUserCalledTerminate=!0,this._terminateInternal()},e.prototype.abort=function(e){if(!this._isAborted){if(this._isAborted=!0,this.isTerminated){if(!this.isActualTerminationPending&&!this._isAbortedNotByScheduler)throw"dependencyWorkers: aborted after termination"}else if(e){if(0===this.pendingDataForWorker.length)throw"dependencyWorkers: Abort without task waiting for schedule";this._isWaitingForWorkerResult=!1}else this._isAbortedNotByScheduler=!0;this.pendingDataForWorker=[],this.canSkipLastPendingDataForWorker=!1,this.isTerminated||this.customEvent("aborting",this.taskKey),this._terminateInternal()}},Object.defineProperty(e.prototype,"dependTaskKeys",{get:function(){return this._dependTaskKeys}}),Object.defineProperty(e.prototype,"dependTaskResults",{get:function(){return this._dependTaskResults}}),e.prototype.registerTaskDependency=function(e){function t(r){return o._pendingDelayedDependencyData.length>0?(o._pendingDelayedDependencyData.push({data:r,onDependencyTaskData:t}),void o._schedulePendingDelayedActions()):(o._dependTaskResults[p]=r,o._hasDependTaskData[p]=!0,o.taskApi._onEvent("dependencyTaskData",r,e),void(a=!0))}function r(e,t){o.taskApi._onEvent("dependencyTaskCustom",e,t)}function n(){if(d)throw"dependencyWorkers: Double termination";d=!0,o._dependsTaskTerminated()}var i=this._workerInputRetreiver.getKeyAsString(e),s=this._dependsTaskContexts.tryAdd(i,function(){return{taskContext:null}});if(!s.isNew)throw"dependencyWorkers: Cannot add task dependency twice";var o=this,a=!1,d=!1,p=this._dependTaskKeys.length;if(this._dependTaskKeys[p]=e,s.value.taskContext=this._parentDependencyWorkers.startTask(e,{onData:t,onTerminated:n,onCustom:r,calleeForDebug:this}),!s.value.taskContext.isActive)throw"dependency-workers error: dependant task already terminated";if(s.value.taskContext._taskInternals._isAborted)throw"dependencyWorkers error: dependant task already aborted";if(this._isRegisteredDependPriorityCalculator&&s.value.taskContext.setPriorityCalculator(this._priorityCalculator),a)throw"dependency-workers error: Internal error: callback called before dependency registration completed";for(var l=s.value.taskContext.getProcessedData(),u=0;u<l.length;++u)this._pendingDelayedDependencyData.push({data:l[u],onDependencyTaskData:t});return l.length>0&&this._schedulePendingDelayedActions(),s.value.taskContext},e.prototype._terminateInternal=function(){this.isTerminated||(this.detachBeforeTermination(),this.isTerminated=!0,this._isWaitingForWorkerResult?this.isActualTerminationPending=!0:this.ended())},e.prototype._registerDependPriorityCalculator=function(){if(this._isRegisteredDependPriorityCalculator)throw"dependencyWorkers: already registered depend priority calculator";if(null===this._priorityCalculator){var e=this;this._priorityCalculator=function(){return e.calculatePriority()}}this._isRegisteredDependPriorityCalculator=!0;for(var t=this._dependsTaskContexts.getFirstIterator();null!==t;){var r=this._dependsTaskContexts.getFromIterator(t).taskContext;t=this._dependsTaskContexts.getNextIterator(t),r.setPriorityCalculator(this._priorityCalculator)}},e.prototype._unregisterDependPriorityCalculator=function(){if(!this._isRegisteredDependPriorityCalculator)throw"dependencyWorkers: not registered depend priority calculator";this._isRegisteredDependPriorityCalculator=!1;for(var e=this._dependsTaskContexts.getFirstIterator();null!==e;){var t=this._dependsTaskContexts.getFromIterator(e).taskContext;e=this._dependsTaskContexts.getNextIterator(e),t.setPriorityCalculator(null)}},e.prototype._dependsTaskTerminated=function(){++this._dependsTasksTerminatedCount,this._dependsTasksTerminatedCount===this._dependsTaskContexts.getCount()&&this.taskApi._onEvent("allDependTasksTerminated"),this.statusUpdate()},e.prototype._schedulePendingDelayedActions=function(){if(!this._pendingDelayedAction){this._pendingDelayedAction=!0;var e=this;setTimeout(function(){if(e._pendingDelayedAction=!1,e._pendingDelayedDependencyData.length>0){var t=e._pendingDelayedDependencyData;e._pendingDelayedDependencyData=[];for(var r=0;r<t.length;++r)t[r].onDependencyTaskData(t[r].data)}if(e._pendingDelayedNewData.length>0){var n=e._pendingDelayedNewData,i=e._pendingDelayedCanSkipLastNewData;e._pendingDelayedNewData=[],e._pendingDelayedCanSkipLastNewData=!1,e._canSkipLastProcessedData&&e.processedData.pop();for(var r=0;r<n.length;++r)e.processedData.push(n[r]),e._canSkipLastProcessedData=i&&r===n.length-1,e._iterateCallbacks(function(t){t.onData(n[r],e.taskKey)})}e._pendingWorkerDone&&(e._isWaitingForWorkerResult=!1,e.statusUpdate()),e._pendingDelayedEnded&&(e._pendingDelayedEnded=!1,e._iterateCallbacks(function(t){t.onTerminated&&t.onTerminated(e._isAborted)}),e.taskContexts.clear())})}},e.prototype._iterateCallbacks=function(e){for(var t=this.taskContexts.getFirstIterator();null!==t;){var r=this.taskContexts.getFromIterator(t);t=this.taskContexts.getNextIterator(t),e(r._callbacks)}},e}();t.exports=o},{"dependency-workers-task":5,"js-builtin-hash-map":8,"linked-list":9}],4:[function(e,t,r){"use strict";function n(){return{}}function i(e,t){resourceScheduler.PriorityScheduler.call(this,n,e,s,t)}var s={getPriority:function(e){return e.calculatePriority()}};i.prototype=Object.create(resourceScheduler.PriorityScheduler.prototype),t.exports=i},{}],5:[function(e,t,r){"use strict";var n=function(){function e(e,t,r){if(this._wrapped=e,e.__wrappingTaskForDebug=this,this._key=t,this._eventListeners={dependencyTaskData:[],statusUpdated:[],allDependTasksTerminated:[],custom:[],dependencyTaskCustom:[]},r)for(var n in this._eventListeners)this._registerWrappedEvent(n)}return Object.defineProperty(e.prototype,"isTerminated",{get:function(){return this._wrapped.isTerminated}}),e.prototype.dataReady=function(e,t,r){this._wrapped.dataReady(e,t,r)},e.prototype.detachBeforeTermination=function(){this._wrapped.detachBeforeTermination()},e.prototype.terminate=function(){this._wrapped.terminate()},e.prototype.registerTaskDependency=function(e){return this._wrapped.registerTaskDependency(e)},e.prototype.calculatePriority=function(){return this._wrapped.calculatePriority()},e.prototype.customEvent=function(e,t){return this._wrapped.customEvent(e,t)},e.prototype.on=function(e,t){if(!this._eventListeners[e])throw"dependencyWorkers: Task has no event "+e;this._eventListeners[e].push(t)},Object.defineProperty(e.prototype,"key",{get:function(){return this._key}}),Object.defineProperty(e.prototype,"dependTaskKeys",{get:function(){return this._wrapped.dependTaskKeys}}),Object.defineProperty(e.prototype,"dependTaskResults",{get:function(){return this._wrapped.dependTaskResults}}),e.prototype._onEvent=function(e,t,r){"statusUpdated"==e&&(t=this._modifyStatus(t));for(var n=this._eventListeners[e],i=0;i<n.length;++i)n[i].call(this,t,r)},e.prototype._modifyStatus=function(e){return e},e.prototype._registerWrappedEvent=function(e){var t=this;this._wrapped.on(e,function(r,n){t._onEvent(e,r,n)})},e}();t.exports=n},{}],6:[function(e,t,r){"use strict";var n=e("js-builtin-hash-map"),i=e("dependency-workers-task-internals"),s=e("dependency-workers-task-context"),o=function(){function e(e){var t=this;if(t._workerInputRetreiver=e,t._taskInternalss=new n,t._workerPoolByTaskType=[],t._taskOptionsByTaskType=[],!e.getWorkerTypeOptions)throw"dependencyWorkers: No workerInputRetreiver.getWorkerTypeOptions() method";if(!e.getKeyAsString)throw"dependencyWorkers: No workerInputRetreiver.getKeyAsString() method"}return e.prototype.startTask=function(e,t){var r=this._workerInputRetreiver.getKeyAsString(e),n=this._taskInternalss.tryAdd(r,function(){return new i}),o=n.value,a=new s(o,t);return n.isNew&&(o.initialize(e,this,this._workerInputRetreiver,this._taskInternalss,n.iterator,this._workerInputRetreiver),this._workerInputRetreiver.taskStarted(o.taskApi)),a},e.prototype.startTaskPromise=function(e){var t=this;return new Promise(function(r,n){function i(e){p=!0,o=e}function s(e){e?n("Task is aborted"):p?r(o):n("Task terminated but no data returned")}var o,a=t.startTask(e,{onData:i,onTerminated:s}),d=a.getProcessedData(),p=d.length>0;p&&(o=d[d.length-1])})},e.prototype.terminateInactiveWorkers=function(){for(var e in this._workerPoolByTaskType){for(var t=this._workerPoolByTaskType[e],r=0;r<t.length;++r)t[r].proxy.terminate();t.length=0}},e.prototype._dataReady=function(e,t,r,n){var i,s=this,o=s._workerPoolByTaskType[r];if(o||(o=[],s._workerPoolByTaskType[r]=o),o.length>0)i=o.pop();else{var a=s._workerInputRetreiver.getWorkerTypeOptions(r);if(!a)return e.newData(t),void e.workerDone();i={proxy:new asyncProxy.AsyncProxyMaster(a.scriptsToImport,a.ctorName,a.ctorArgs),transferables:a.transferables,pathToTransferablesInPromiseResult:a.pathToTransferablesInPromiseResult}}var d=[t,e.taskKey],p={isReturnPromise:!0,transferables:i.transferables,pathToTransferablesInPromiseResult:i.pathToTransferablesInPromiseResult},l=i.proxy.callFunction("start",d,p);l.then(function(t){return e.newData(t,n),t})["catch"](function(e){return console.log("Error in DependencyWorkers' worker: "+e),e}).then(function(t){o.push(i),e.workerDone()})},e.prototype.waitForSchedule=function(e){e.schedule({jobDone:function(){}})},e.prototype.initializingTask=function(e){},e}();t.exports=o},{"dependency-workers-task-context":2,"dependency-workers-task-internals":3,"js-builtin-hash-map":8}],7:[function(e,t,r){"use strict";var n=e("linked-list"),i=function(){function e(e){var t=this;t._hasher=e,t.clear()}return e.prototype.clear=function(){this._listByKey=[],this._listOfLists=new n,this._count=0},e.prototype.getFromKey=function(e){var t=this._hasher.getHashCode(e),r=this._listByKey[t];if(!r)return null;for(var n=r.list,i=n.getFirstIterator();null!==i;){var s=n.getFromIterator(i);if(this._hasher.isEqual(s.key,e))return s.value;i=n.getNextIterator(i)}return null},e.prototype.getFromIterator=function(e){return e._hashElements.list.getFromIterator(e._internalIterator).value},e.prototype.tryAdd=function(e,t){var r=this._hasher.getHashCode(e),i=this._listByKey[r];i||(i={hashCode:r,list:new n,listOfListsIterator:null},i.listOfListsIterator=this._listOfLists.add(i),this._listByKey[r]=i);var s={_hashElements:i,_internalIterator:null};for(s._internalIterator=i.list.getFirstIterator();null!==s._internalIterator;){var o=i.list.getFromIterator(s._internalIterator);if(this._hasher.isEqual(o.key,e))return{iterator:s,isNew:!1,value:o.value};s._internalIterator=i.list.getNextIterator(s._internalIterator)}var a=t();return s._internalIterator=i.list.add({key:e,value:a}),++this._count,{iterator:s,isNew:!0,value:a}},e.prototype.remove=function(e){var t=e._hashElements.list.getCount();e._hashElements.list.remove(e._internalIterator);var r=e._hashElements.list.getCount();this._count+=r-t,0===r&&(this._listOfLists.remove(e._hashElements.listOfListsIterator),delete this._listByKey[e._hashElements.hashCode])},e.prototype.getCount=function(){return this._count},e.prototype.getFirstIterator=function(){var e=this._listOfLists.getFirstIterator(),t=null,r=null;return null!==e&&(t=this._listOfLists.getFromIterator(e),r=t.list.getFirstIterator()),null===r?null:{_hashElements:t,_internalIterator:r}},e.prototype.getNextIterator=function(e){for(var t={_hashElements:e._hashElements,_internalIterator:e._hashElements.list.getNextIterator(e._internalIterator)};null===t._internalIterator;){var r=this._listOfLists.getNextIterator(e._hashElements.listOfListsIterator);if(null===r)return null;t._hashElements=this._listOfLists.getFromIterator(r),t._internalIterator=t._hashElements.list.getFirstIterator()}return t},e}();t.exports=i},{"linked-list":9}],8:[function(e,t,r){"use strict";var n=e("hash-map"),i=function(){function e(){n.call(this,t)}var t={getHashCode:function(e){return e},isEqual:function(e,t){return e===t}};return e.prototype=Object.create(n.prototype),e}();t.exports=i},{"hash-map":7}],9:[function(e,t,r){"use strict";var n=function(){function e(){this.clear()}return e.prototype.clear=function(){this._first={_prev:null,_parent:this},this._last={_next:null,_parent:this},this._count=0,this._last._prev=this._first,this._first._next=this._last},e.prototype.add=function(e,t){null!==t&&void 0!==t||(t=this._last),this._validateIteratorOfThis(t),++this._count;var r={_value:e,_next:t,_prev:t._prev,_parent:this};return r._prev._next=r,t._prev=r,r},e.prototype.remove=function(e){this._validateIteratorOfThis(e),--this._count,e._prev._next=e._next,e._next._prev=e._prev,e._parent=null},e.prototype.getFromIterator=function(e){return this._validateIteratorOfThis(e),e._value},e.prototype.getFirstIterator=function(){var e=this.getNextIterator(this._first);return e},e.prototype.getLastIterator=function(){var e=this.getPrevIterator(this._last);return e},e.prototype.getNextIterator=function(e){return this._validateIteratorOfThis(e),e._next===this._last?null:e._next},e.prototype.getPrevIterator=function(e){return this._validateIteratorOfThis(e),e._prev===this._first?null:e._prev},e.prototype.getCount=function(){return this._count},e.prototype._validateIteratorOfThis=function(e){if(e._parent!==this)throw"iterator must be of the current LinkedList"},e}();t.exports=n},{}],10:[function(e,t,r){"use strict";var n=e("dependency-workers"),i=function(){function e(e,t){var r=this;n.call(this,t),r._scheduler=e,r._isDisableWorkerCache=[],r._inputRetreiver=t}return e.prototype=Object.create(n.prototype),e.prototype.initializingTask=function(e,t){var r=this;e.on("dependencyTaskCustom",function(e,n){if("aborting"===e){if(!r._scheduler.shouldAbort(t))throw"Task "+n+" aborted but a task depends on it didn't. Check scheduler consistency";t.abort(!1)}})},e.prototype.waitForSchedule=function(e,t){if(void 0===this._isDisableWorkerCache[t]&&(this._isDisableWorkerCache[t]=null===this._inputRetreiver.getWorkerTypeOptions(t)),this._isDisableWorkerCache[t])return void n.prototype.waitForSchedule.call(this,e);var r=!1,i=null;this._scheduler.enqueueJob(function(t,n,s){if(n!==e)throw"dependencyWorkers: Wrong jobContext - seems internal error in resource-scheduler.js";if(r)throw"dependencyWorkers: scheduled after finish";if(null!==i)throw"dependencyWorkers: Scheduled twice";i=s,e.schedule(i)},e,function(){if(r)throw"dependencyWorkers: abort after finish";if(null!==i)throw"dependencyWorkers: abort after scheduled";i=null,r=!0,e.abort(!0)})},e}();t.exports=i},{"dependency-workers":6}],11:[function(e,t,r){"use strict";var n=function(){function e(e){if(!e.getKeyAsString)throw"dependencyWorkers: No inputRetreiver.getKeyAsString() method";if(!e.getWorkerTypeOptions)throw"dependencyWorkers: No inputRetreiver.getTaskTypeOptions() method";var t=this;t._inputRetreiver=e}return e.prototype.taskStarted=function(e){throw"dependencyWorkers: Not implemented taskStarted()"},e.prototype.getKeyAsString=function(e){return this._inputRetreiver.getKeyAsString(e)},e.prototype.getWorkerTypeOptions=function(e){return this._inputRetreiver.getWorkerTypeOptions(e)},e}();t.exports=n},{}]},{},[1])(1)});